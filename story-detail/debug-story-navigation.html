<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navigation Debug for Story Detail Pages</title>
    <link rel="stylesheet" href="../styles.css">
    <script src="../components/navigation-loader.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }

        .debug-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .debug-info {
            background: #e8f4f8;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #007cba;
            font-family: monospace;
            font-size: 14px;
        }

        .color-test {
            padding: 10px;
            margin: 5px 0;
        }

        .nav-test {
            background: #333;
            color: white;
            padding: 20px;
            margin: 10px 0;
        }
    </style>
</head>

<body class="fusion-body">
    <div class="debug-section">
        <h1>ðŸ”§ Navigation Debug for Story Detail Pages</h1>
        <p>This page simulates a story detail page to test navigation loading and colors.</p>

        <!-- Navigation Component will be loaded here automatically -->
        <header id="masthead" class="site-header fusion-header" role="banner">
            <!-- Navigation content loaded by navigation-loader.js -->
        </header>
    </div>

    <div class="debug-section">
        <h2>ðŸ“Š Debug Information</h2>
        <div id="debug-output" class="debug-info">
            Loading debug information...
        </div>
    </div>

    <div class="debug-section">
        <h2>ðŸŽ¨ Color Tests</h2>
        <div class="color-test">
            <strong>Expected Results:</strong><br>
            â€¢ Navigation text should be <strong>BLACK</strong> on this page<br>
            â€¢ Navigation text should be <strong>WHITE</strong> on homepage<br>
            â€¢ No blue colors should appear anywhere in navigation
        </div>

        <div class="nav-test">
            <strong>Test Navigation on Dark Background:</strong><br>
            The navigation above should have BLACK text, not white, since this is not the homepage.
        </div>
    </div>

    <div class="debug-section">
        <h2>ðŸ”— Link Tests</h2>
        <p>Click these links to test navigation:</p>
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
            <a href="../index.html"
                style="background: #333; color: white; padding: 10px; text-decoration: none; border-radius: 4px;">Homepage
                (White Nav)</a>
            <a href="../stories.html"
                style="background: #007cba; color: white; padding: 10px; text-decoration: none; border-radius: 4px;">Stories
                (Black Nav)</a>
            <a href="../about.html"
                style="background: #65bc7b; color: white; padding: 10px; text-decoration: none; border-radius: 4px;">About
                (Black Nav)</a>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Wait for navigation to load
            setTimeout(function () {
                updateDebugInfo();

                // Check again after a short delay
                setTimeout(updateDebugInfo, 2000);
            }, 1000);
        });

        function updateDebugInfo() {
            const debugOutput = document.getElementById('debug-output');
            const currentPath = window.location.pathname;
            const bodyClasses = document.body.className;
            const navigation = document.querySelector('.fusion-tb-header');
            const logoLink = document.querySelector('#logo-link');
            const menuItems = document.querySelectorAll('.awb-menu__main-a');

            let menuLinksInfo = '';
            if (menuItems.length > 0) {
                menuItems.forEach((item, index) => {
                    const href = item.getAttribute('href');
                    const computedStyle = window.getComputedStyle(item);
                    const color = computedStyle.color;
                    menuLinksInfo += `Menu ${index + 1}: href="${href}", color="${color}"<br>`;
                });
            } else {
                menuLinksInfo = 'No menu items found!<br>';
            }

            debugOutput.innerHTML = `
                <strong>Current Path:</strong> ${currentPath}<br>
                <strong>Body Classes:</strong> ${bodyClasses}<br>
                <strong>Is Homepage:</strong> ${bodyClasses.includes('home') ? 'YES' : 'NO'}<br>
                <strong>Navigation Loaded:</strong> ${navigation ? 'YES' : 'NO'}<br>
                <strong>Logo Link:</strong> ${logoLink ? logoLink.href : 'Not found'}<br>
                <strong>Menu Items Found:</strong> ${menuItems.length}<br>
                ${menuLinksInfo}
                <strong>Expected Path Prefix:</strong> ../ (for story detail pages)<br>
                <strong>Navigation Component HTML:</strong><br>
                ${navigation ? navigation.innerHTML.substring(0, 300) + '...' : 'Navigation not loaded'}
            `;
        }

        // Listen for navigation loaded event
        document.addEventListener('navigationLoaded', function () {
            console.log('Navigation loaded event received');
            setTimeout(updateDebugInfo, 100);
        });
    </script>
</body>

</html>